<!DOCTYPE HTML>
<html>
<head>
	<title>Launching App...</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<script>
		var appname = "TestDeepLink";
	var applink = "mytelenor://deepLinkCallback";  // id = nil
	var fallback_url_android = "https://play.google.com/store/apps/details?id=bg.telenor.mytelenor";
	var fallback_url_ios = "https://itunes.apple.com/us/app/google-maps-navigation-transit/id585027354?mt=8"
	var android_package_name = "bg.telenor.mytelenor";
</script>


</head>
<body class="text-center os-android">

	<iframe id="i" style="display:none" height=0 width=0></iframe>

	<script>
		document.ontouchmove = function(event){
			event.preventDefault();
		}

		var userAgent = navigator.userAgent || navigator.vendor || window.opera;

		if (location.search != "") {
			applink = applink + "/" + location.search.substring(1)
		}

			
		if (/Windows/i.test(userAgent)) {  //WINDOWS PHONE - redirect to custom scheme
			location.replace(applink);
		}
		else if (/android/i.test(userAgent)) {// ****** ANDROID *****
			
			if (
			navigator.userAgent.indexOf('Version/') > -1 // generic Android Browser
			|| navigator.userAgent.indexOf('Firefox/') > -1
			) {
				i = document.getElementById('i');
			i.src = applink;
			
			setTimeout(function() {
				if (i.contentDocument) {
					history.length > 1 ? history.back() : "We need an alternative to this: open('about:', '_self').close()";
				}
				else {
					location.replace(fallback_url_android);
				}
			}, 2000);
			}
			else if (navigator.userAgent.indexOf('Chrome/') > -1) { // Google Chrome
				parts = applink.match(/^([^:]+):(.*)/);
				uri_scheme = parts[1];
				uri_data   = parts[2];

				intent_url = "intent:" + uri_data +
				"#Intent" +
				";scheme=" + uri_scheme +
				";package=" + android_package_name +
				";end";
window.alert(intent_url);
				location.replace(intent_url);

				setTimeout(function() {
					location.replace(fallback_url_android);
				
			}, 2000);
			}

		} else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
			location.replace(fallback_url_ios)
		}
		else {  //ALL OTHER - redirect to custom scheme
			location.replace(applink);
		}
</script>
</body>
</html>